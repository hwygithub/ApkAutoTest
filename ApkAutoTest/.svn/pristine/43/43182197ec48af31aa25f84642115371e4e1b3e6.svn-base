package com.tencent.apk_auto_test.model;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.util.ArrayList;

import com.tencent.apk_auto_test.data.StaticData;
import com.tencent.apk_auto_test.filelogsave.FileDealer;

import android.content.Context;
import android.content.res.AssetManager;
import android.os.Environment;
import android.util.Log;

public class TxtUtil {

	public static void saveMsg(String path, String msg, String name,
			Context context, int row, int column) {
		File destDir = new File(Environment.getExternalStorageDirectory()
				+ "/MpBatteryAutoTest");
		if (!destDir.exists()) {
			Log.e("hwy", "creat");
			destDir.mkdirs();
		}
		// saveMsg(path, msg, name);
		Excel.WriteToExcel(msg, row, column, name);
		// check the file is or not exist
		// File file = new File(path);
		// if (!file.exists()) {
		// StaticData.mDealer.writeExcel(msg, row, column, name);
		// }
	}

	public static void saveMsg(String path, String msg, String name) {
		File HistoryFolder;

		HistoryFolder = new File(path);

		if (!HistoryFolder.exists()) {
			HistoryFolder.mkdirs();
		}
		File file = new File(path + File.separator + name + ".txt");
		if (file.exists()) {
			file.delete();
		}
		try {
			FileOutputStream outStream = new FileOutputStream(path
					+ File.separator + name + ".txt", true);
			OutputStreamWriter writer = new OutputStreamWriter(outStream,
					"utf-8");
			writer.write(msg);
			writer.write("\n");
			writer.flush();
			writer.close();
			outStream.close();
			Log.e("m", "file write");
		} catch (Exception e) {
			Log.e("m", "file write error");
			e.printStackTrace();
		}
	}

	public static ArrayList<String> readMsgForList(File file) {
		ArrayList<String> list = new ArrayList<String>();
		try {
			FileInputStream fin = new FileInputStream(file);
			BufferedReader br = new BufferedReader(new InputStreamReader(fin));
			String str = "";
			str = br.readLine();
			while (str != null) {
				str = str.trim();
				list.add(str);
				Log.e("", str + "");
				str = br.readLine();
			}
			br.close();
		} catch (Exception e) {
			e.printStackTrace();
		}
		return list;
	}

}
